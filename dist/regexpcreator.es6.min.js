/*!***************************************************
* advanced-mark.js v2.3.0
* Copyright (c) 2014–2023, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
* Modified by angezid
*****************************************************/
class t{constructor(t){this.opt=Object.assign({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},t)}get chars(){return this._chars||(this._chars=[],["aàáảãạăằắẳẵặâầấẩẫậäåāą","cçćč","dđď","eèéẻẽẹêềếểễệëěēę","iìíỉĩịîïī","lł","nñňń","oòóỏõọôồốổỗộơởỡớờợöøōő","rř","sšśșş","tťțţ","uùúủũụưừứửữựûüůūű","yýỳỷỹỵÿ","zžżź"].forEach((t=>{this._chars.push(t,t.toUpperCase())}))),this._chars}create(t,e){const r="g"+(this.opt.caseSensitive?"":"i");t=this.checkWildcardsEscape(t),t=this.createSynonyms(t,r);const s=this.getJoinersPunctuation();s&&(t=this.setupIgnoreJoiners(t)),this.opt.diacritics&&(t=this.createDiacritics(t)),t=t.replace(/\s+/g,"[\\s]+"),s&&(t=this.createJoiners(t,s)),"disabled"!==this.opt.wildcards&&(t=this.createWildcards(t));const i=this.createAccuracy(t);return e?i:new RegExp(`${i.lookbehind}(${i.pattern})${i.lookahead}`,r)}createCombinePattern(t,e){if(!Array.isArray(t)||!t.length)return null;const r=e?"(":"(?:",s=this.create(t[0],!0);return s.pattern=this.distinct(t.map((t=>`${r}${this.create(t,!0).pattern})`))).join("|"),s}sortByLength(t){return t.sort(((t,e)=>t.length===e.length?t>e?1:-1:e.length-t.length))}escape(t){return t.replace(/[[\]/{}()*+?.\\^$|]/g,"\\$&")}preprocess(t){return t&&t.length?this.distinct("string"==typeof t?t.split(""):t).join("").replace(/[-^\]\\]/g,"\\$&"):""}distinct(t){const e=[];return t.forEach((t=>{t.trim()&&-1===e.indexOf(t)&&e.push(t)})),e}createSynonyms(t,e){const r=this.opt.synonyms;if(!Object.keys(r).length)return t;for(const s in r)if(r.hasOwnProperty(s)){let i=Array.isArray(r[s])?r[s]:[r[s]];if(i.unshift(s),i=this.sortByLength(this.distinct(i)).map((t=>this.checkWildcardsEscape(t))),i.length>1){const r=i.map((t=>this.escape(t))).join("|");t=t.replace(new RegExp(r,e),`(?:${i.join("|")})`)}}return t}checkWildcardsEscape(t){return"disabled"!==this.opt.wildcards&&(t=(t=t.replace(/(\\.)+|[?*]/g,((t,e)=>e?t:"?"===t?"":""))).replace(/\\+(?=[?*\x01\x02])/g,(t=>t.slice(1)))),this.escape(t)}createWildcards(t){const e="withSpaces"===this.opt.wildcards,r=this.opt.blockElementsBoundary,s=`[^${e&&r?"":""}]*?`;return t.replace(/\x01/g,e?"[^]?":"\\S?").replace(/\x02/g,e?s:"\\S*")}setupIgnoreJoiners(t){return t.replace(/(\(\?:|\|)|\\?(?:[\uD800-\uDBFF][\uDC00-\uDFFF]|.)(?=([|)]|$)|.)/g,((t,e,r)=>e||void 0!==r?t:t+"\0"))}createJoiners(t,e){return t.split(/\x00+/).join(`[${e}]*`)}getJoinersPunctuation(){let t=this.preprocess(this.opt.ignorePunctuation),e=t||"";return this.opt.ignoreJoiners&&(e+="\\u00ad\\u200b\\u200c\\u200d"),e}createDiacritics(t){const e=this.chars;return t.split("").map((t=>{for(let r=0;r<e.length;r+=2){const s=-1!==e[r].indexOf(t);if(this.opt.caseSensitive){if(s)return"["+e[r]+"]";if(-1!==e[r+1].indexOf(t))return"["+e[r+1]+"]"}else if(s||-1!==e[r+1].indexOf(t))return"["+e[r]+e[r+1]+"]"}return t})).join("")}createAccuracy(t){let e,r=this.opt.accuracy,s="()",i=t,c="";if("string"!=typeof r&&(e=this.preprocess(r.limiters),r=r.value),"exactly"===r){const t=e?"[\\s"+e+"]":"\\s";s=`(^|${t})`,c=`(?=$|${t})`}else{const c=e||"!\"#$%&'()*+,\\-./:;<=>?@[\\]\\\\^_`{|}~¡¿",n=`[^\\s${c}]*`;"complementary"===r?i=n+t+n:"startsWith"===r&&(s=`(^|[\\s${c}])`,i=t.replace(/\[\\s\]\+/g,n+"$&")+n)}return{lookbehind:s,pattern:i,lookahead:c}}}function e(e){const r=new t(e);this.create=(t,e)=>r.create(t,e),this.createCombinePattern=(t,e)=>r.createCombinePattern(t,e),this.createDiacritics=t=>r.createDiacritics(t)}export{e as default};
