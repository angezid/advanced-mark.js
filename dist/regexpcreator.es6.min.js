/*!***************************************************
* advanced-mark.js v2.3.0
* Copyright (c) 2014–2023, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
* Modified by angezid
*****************************************************/
class e{constructor(e){this.opt=Object.assign({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},e)}create(e,t){const r="g"+(this.opt.caseSensitive?"":"i");e=this.checkWildcardsEscape(e),e=this.createSynonyms(e,r);const i=this.getJoinersPunctuation();i&&(e=this.setupIgnoreJoiners(e)),this.opt.diacritics&&(e=this.createDiacritics(e)),e=e.replace(/\s+/g,"[\\s]+"),i&&(e=this.createJoiners(e,i)),"disabled"!==this.opt.wildcards&&(e=this.createWildcards(e));const s=this.createAccuracy(e);return t?s:new RegExp(`${s.lookbehind}(${s.pattern})${s.lookahead}`,r)}createCombinePattern(e,t){if(!Array.isArray(e)||!e.length)return null;const r=t?"(":"(?:",i=this.create(e[0],!0),s=i.lookbehind,n=i.lookahead;return{lookbehind:s,pattern:this.distinct(e.map((e=>`${r}${this.create(e,!0).pattern})`))).join("|"),lookahead:n}}sortByLength(e){return e.sort(((e,t)=>e.length===t.length?e>t?1:-1:t.length-e.length))}escape(e){return e.replace(/[[\]/{}()*+?.\\^$|]/g,"\\$&")}preprocess(e){return e&&e.length?this.distinct("string"==typeof e?e.split(""):e).join("").replace(/[-^\]\\]/g,"\\$&"):""}distinct(e){const t=[];return e.forEach((e=>{e.trim()&&-1===t.indexOf(e)&&t.push(e)})),t}createSynonyms(e,t){const r=this.opt.synonyms;if(!Object.keys(r).length)return e;for(const i in r)if(r.hasOwnProperty(i)){let s=Array.isArray(r[i])?r[i]:[r[i]];if(s.unshift(i),s=this.sortByLength(this.distinct(s)).map((e=>this.checkWildcardsEscape(e))),s.length>1){const r=s.map((e=>this.escape(e))).join("|");e=e.replace(new RegExp(r,t),`(?:${s.join("|")})`)}}return e}checkWildcardsEscape(e){return"disabled"!==this.opt.wildcards&&(e=e.replace(/(\\)*\?/g,((e,t)=>t?"?":"")).replace(/(\\)*\*/g,((e,t)=>t?"*":""))),this.escape(e)}createWildcards(e){const t="withSpaces"===this.opt.wildcards,r=this.opt.blockElementsBoundary,i=t&&r?"[^"+(r.char?r.char:"")+"]*?":"[\\S\\s]*?";return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?i:"\\S*")}setupIgnoreJoiners(e){return e.replace(/(\(\?:|\|)|\\?.(?=([|)]|$)|.)/g,((e,t,r)=>t||void 0!==r?e:e+"\0"))}createJoiners(e,t){return e.split(/\u0000+/).join(`[${t}]*`)}getJoinersPunctuation(){let e=this.preprocess(this.opt.ignorePunctuation),t=e||"";return this.opt.ignoreJoiners&&(t+="\\u00ad\\u200b\\u200c\\u200d"),t}createDiacritics(e){const t=this.opt.caseSensitive,r=["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōő","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌŐ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůūű","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪŰ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"];return e.split("").map((e=>{for(let i=0;i<r.length;i+=2)if(t){if(-1!==r[i].indexOf(e))return"["+r[i]+"]";if(-1!==r[i+1].indexOf(e))return"["+r[i+1]+"]"}else if(-1!==r[i].indexOf(e)||-1!==r[i+1].indexOf(e))return"["+r[i]+r[i+1]+"]";return e})).join("")}createAccuracy(e){let t,r=this.opt.accuracy,i="()",s=e,n="";if("string"!=typeof r&&(t=this.preprocess(r.limiters),r=r.value),"exactly"===r){const e=t?"[\\s"+t+"]":"\\s";i=`(^|${e})`,n=`(?=$|${e})`}else{const n=t||"!\"#$%&'()*+,\\-./:;<=>?@[\\]\\\\^_`{|}~¡¿",c=`[^\\s${n}]*`;"complementary"===r?s=c+e+c:"startsWith"===r&&(i=`(^|[\\s${n}])`,s=e.replace(/\[\\s\]\+/g,c+"$&")+c)}return{lookbehind:i,pattern:s,lookahead:n}}}function t(t){const r=new e(t);this.create=(e,t)=>r.create(e,t),this.createCombinePattern=(e,t)=>r.createCombinePattern(e,t),this.createDiacritics=e=>r.createDiacritics(e)}export{t as default};
