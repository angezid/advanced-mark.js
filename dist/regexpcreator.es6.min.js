/*!***************************************************
* advanced-mark.js v1.1.1
* Copyright (c) 2014–2023, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
* Modified by angezid
*****************************************************/
class e{constructor(e){this.opt=Object.assign({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},e)}create(e,t){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),t?this.createAccuracyRegExp(e,!0):(e=this.createAccuracyRegExp(e,!1),new RegExp(e,"gm"+(this.opt.caseSensitive?"":"i")))}createCombinePattern(e,t){if(!Array.isArray(e)||!e.length)return null;const r=t?"(":"(?:",i=this.create(e[0],!0),s=i.lookbehind,a=i.lookahead;return{lookbehind:s,pattern:e.map((e=>`${r}${this.create(e,!0).pattern})`)).join("|"),lookahead:a}}sortByLength(e){return e.sort(((e,t)=>e.length===t.length?e>t?1:-1:t.length-e.length))}escapeStr(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}createSynonymsRegExp(e){const t=this.opt.synonyms,r=this.opt.caseSensitive?"":"i";for(let i in t)if(t.hasOwnProperty(i)){let s=Array.isArray(t[i])?t[i]:[t[i]];if(s.unshift(i),s=this.sortByLength(s).map((e=>("disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e)))).filter((e=>""!==e)),s.length>1){const t=s.map((e=>this.escapeStr(e))).join("|");e=e.replace(new RegExp(t,`gm${r}`),`(?:${s.join("|")})`)}}return e}setupWildcardsRegExp(e){return(e=e.replace(/(?:\\)*\?/g,(e=>"\\"===e.charAt(0)?"?":""))).replace(/(?:\\)*\*/g,(e=>"\\"===e.charAt(0)?"*":""))}createWildcardsRegExp(e){let t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}setupIgnoreJoinersRegExp(e){return e.replace(/(\(\?:|\|)|\\?.(?=([|)]|$)|.)/g,((e,t,r)=>t||void 0!==r?e:e+"\0"))}createJoinersRegExp(e){let t=[];const r=this.opt.ignorePunctuation;return Array.isArray(r)&&r.length&&t.push(this.escapeStr(r.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join(`[${t.join("")}]*`):e}createDiacriticsRegExp(e){const t=this.opt.caseSensitive,r=["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"];return e.split("").map((e=>{for(let i=0;i<r.length;i+=2)if(t){if(-1!==r[i].indexOf(e))return"["+r[i]+"]";if(-1!==r[i+1].indexOf(e))return"["+r[i+1]+"]"}else if(-1!==r[i].indexOf(e)||-1!==r[i+1].indexOf(e))return"["+r[i]+r[i+1]+"]";return e})).join("")}createMergedBlanksRegExp(e){return e.replace(/\s+/g,"[\\s]+")}createAccuracyRegExp(e,t){let r=this.opt.accuracy,i="string"==typeof r?r:r.value,s="string"==typeof r?[]:r.limiters,a="";s.forEach((e=>{a+=`|${this.escapeStr(e)}`}));let n,c="()",o="";switch(i){case"partially":default:n=e;break;case"complementary":a="\\s"+(a||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿")),n=`[^${a}]*${e}[^${a}]*`;break;case"exactly":c=`(^|\\s${a})`,n=e,o=`(?=$|\\s${a})`}return t?{lookbehind:c,pattern:n,lookahead:o}:`${c}(${n})${o}`}}function t(t){const r=new e(t);this.create=(e,t)=>r.create(e,t),this.createCombinePattern=(e,t)=>r.createCombinePattern(e,t),this.createDiacritics=e=>r.createDiacriticsRegExp(e)}export{t as default};
