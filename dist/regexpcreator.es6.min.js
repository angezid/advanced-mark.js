/*!***************************************************
* advanced-mark.js v2.0.0
* Copyright (c) 2014–2023, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
* Modified by angezid
*****************************************************/
class e{constructor(e){this.opt=Object.assign({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},e)}create(e,t){e=this.checkWildcardsEscape(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonyms(e));const i=this.getJoinersPunctuation();i&&(e=this.setupIgnoreJoiners(e)),this.opt.diacritics&&(e=this.createDiacritics(e)),e=e.replace(/\s+/g,"[\\s]+"),i&&(e=this.createJoiners(e,i)),"disabled"!==this.opt.wildcards&&(e=this.createWildcards(e));const r=this.createAccuracy(e);return t?r:new RegExp(`${r.lookbehind}(${r.pattern})${r.lookahead}`,"g"+(this.opt.caseSensitive?"":"i"))}createCombinePattern(e,t){if(!Array.isArray(e)||!e.length)return null;const i=t?"(":"(?:",r=this.create(e[0],!0),s=r.lookbehind,n=r.lookahead;return{lookbehind:s,pattern:this.distinct(e.map((e=>`${i}${this.create(e,!0).pattern})`))).join("|"),lookahead:n}}sortByLength(e){return e.sort(((e,t)=>e.length===t.length?e>t?1:-1:t.length-e.length))}escape(e){return e.replace(/[[\]/{}()*+?.\\^$|]/g,"\\$&")}escapeCharsSet(e){return e.replace(/[-^\]\\]/g,"\\$&")}toArrayIfString(e){return e&&e.length?this.distinct("string"==typeof e?e.split(""):e):[]}distinct(e){const t=[];return e.forEach((e=>{e.trim()&&-1===t.indexOf(e)&&t.push(e)})),t}createSynonyms(e){const t=this.opt.synonyms,i="g"+(this.opt.caseSensitive?"":"i");for(const r in t)if(t.hasOwnProperty(r)){let s=Array.isArray(t[r])?t[r]:[t[r]];if(s.unshift(r),s=this.sortByLength(this.distinct(s)).map((e=>this.checkWildcardsEscape(e))),s.length>1){const t=s.map((e=>this.escape(e))).join("|");e=e.replace(new RegExp(t,i),`(?:${s.join("|")})`)}}return e}checkWildcardsEscape(e){return"disabled"!==this.opt.wildcards&&(e=e.replace(/(\\)*\?/g,((e,t)=>t?"?":"")).replace(/(\\)*\*/g,((e,t)=>t?"*":""))),this.escape(e)}createWildcards(e){let t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}setupIgnoreJoiners(e){return e.replace(/(\(\?:|\|)|\\?.(?=([|)]|$)|.)/g,((e,t,i)=>t||void 0!==i?e:e+"\0"))}createJoiners(e,t){return e.split(/\u0000+/).join(`[${t}]*`)}getJoinersPunctuation(){let e=this.toArrayIfString(this.opt.ignorePunctuation),t="";return e.length&&(t=this.escapeCharsSet(e.join(""))),this.opt.ignoreJoiners&&(t+="\\u00ad\\u200b\\u200c\\u200d"),t}createDiacritics(e){const t=this.opt.caseSensitive,i=["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"];return e.split("").map((e=>{for(let r=0;r<i.length;r+=2)if(t){if(-1!==i[r].indexOf(e))return"["+i[r]+"]";if(-1!==i[r+1].indexOf(e))return"["+i[r+1]+"]"}else if(-1!==i[r].indexOf(e)||-1!==i[r+1].indexOf(e))return"["+i[r]+i[r+1]+"]";return e})).join("")}createAccuracy(e){let t,i=this.opt.accuracy,r="()",s=e,n="";if("string"!=typeof i&&(t=this.toArrayIfString(i.limiters),t=t.length?t:null,i=i.value),"complementary"===i){let i="\\s"+(t?this.escapeCharsSet(t.join("")):"!\"#$%&'()*+,\\-./:;<=>?@[\\]\\\\^_`{|}~¡¿");s=`[^${i}]*${e}[^${i}]*`}else if("exactly"===i){let e=t?"|"+t.map((e=>this.escape(e))).join("|"):"";r=`(^|\\s${e})`,n=`(?=$|\\s${e})`}return{lookbehind:r,pattern:s,lookahead:n}}}function t(t){const i=new e(t);this.create=(e,t)=>i.create(e,t),this.createCombinePattern=(e,t)=>i.createCombinePattern(e,t),this.createDiacritics=e=>i.createDiacriticsRegExp(e)}export{t as default};
