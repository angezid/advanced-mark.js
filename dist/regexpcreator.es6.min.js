/*!***************************************************
* advanced-mark.js v2.6.0
* Copyright (c) 2014–2024, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
* Modified by angezid
*****************************************************/
class t{constructor(t){this.opt=Object.assign({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},t)}get chars(){return this._chars||(this._chars=[],["aàáảãạăằắẳẵặâầấẩẫậäåāą","cçćč","dđď","eèéẻẽẹêềếểễệëěēę","iìíỉĩịîïī","lł","nñňń","oòóỏõọôồốổỗộơởỡớờợöøōő","rř","sšśșş","tťțţ","uùúủũụưừứửữựûüůūű","yýỳỷỹỵÿ","zžżź"].forEach((t=>{this._chars.push(t,t.toUpperCase())}))),this._chars}create(t,e){const s="g"+(this.opt.caseSensitive?"":"i");t=this.checkWildcardsEscape(t),t=this.createSynonyms(t,s);const r=this.getJoinersPunctuation();r&&(t=this.setupIgnoreJoiners(t)),this.opt.diacritics&&(t=this.createDiacritics(t)),t=t.replace(/\s+/g,"[\\s]+"),r&&(t=this.createJoiners(t,r)),"disabled"!==this.opt.wildcards&&(t=this.createWildcards(t));const i=this.createAccuracy(t);return e?i:new RegExp(`${i.lookbehind}(${i.pattern})${i.lookahead}`,s)}createCombinePattern(t,e){if(!Array.isArray(t)||!t.length)return null;const s=e?"(":"(?:",r=this.create(t[0],!0);return r.pattern=this.distinct(t.map((t=>`${s}${this.create(t,!0).pattern})`))).join("|"),r}sortByLength(t){return t.sort(((t,e)=>t.length===e.length?t>e?1:-1:e.length-t.length))}escape(t){return t.replace(/[[\]/{}()*+?.\\^$|]/g,"\\$&")}preprocess(t){return t&&t.length?this.distinct("string"==typeof t?t.split(""):t).join("").replace(/[-^\]\\]/g,"\\$&"):""}distinct(t){const e=[];return t.forEach((t=>{t.trim()&&-1===e.indexOf(t)&&e.push(t)})),e}createSynonyms(t,e){const s=this.opt.synonyms;if(!Object.keys(s).length)return t;for(const r in s)if(s.hasOwnProperty(r)){let i=Array.isArray(s[r])?s[r]:[s[r]];if(i.unshift(r),i=this.sortByLength(this.distinct(i)).map((t=>this.checkWildcardsEscape(t))),i.length>1){const s=i.map((t=>this.escape(t))).join("|");t=t.replace(new RegExp(s,e),`(?:${i.join("|")})`)}}return t}checkWildcardsEscape(t){return"disabled"!==this.opt.wildcards&&(t=t.replace(/(\\.)+|[?*]/g,((t,e)=>e?t:"?"===t?"":"")).replace(/\\+(?=[?*\x01\x02])/g,(t=>t.slice(1)))),this.escape(t)}createWildcards(t){const e="withSpaces"===this.opt.wildcards,s=this.opt.blockElementsBoundary,r=`[^${e&&s?"":""}]*?`;return t.replace(/\x01/g,e?"[^]?":"\\S?").replace(/\x02/g,e?r:"\\S*")}setupIgnoreJoiners(t){return t.replace(/((?:\\\\)+|\x02|\(\?:|\|)|\\?(?:[\uD800-\uDBFF][\uDC00-\uDFFF]|.)(?=([|)\x02]|$)|.)/g,((t,e,s)=>e||void 0!==s?t:t+"\0"))}createJoiners(t,e){return t.split(/\x00+/).join(`[${e}]*`)}getJoinersPunctuation(){let t=this.preprocess(this.opt.ignorePunctuation),e=t||"";return this.opt.ignoreJoiners&&(e+="\\u00ad\\u200b\\u200c\\u200d"),e}createDiacritics(t){const e=this.chars;return t.split("").map((t=>{for(let s=0;s<e.length;s+=2){const r=-1!==e[s].indexOf(t);if(this.opt.caseSensitive){if(r)return"["+e[s]+"]";if(-1!==e[s+1].indexOf(t))return"["+e[s+1]+"]"}else if(r||-1!==e[s+1].indexOf(t))return"["+e[s]+e[s+1]+"]"}return t})).join("")}createAccuracy(t){let e,s=this.opt.accuracy,r="()",i=t,c="";if("string"!=typeof s&&(e=this.preprocess(s.limiters),s=s.value),"exactly"===s){const t=e?"[\\s"+e+"]":"\\s";r=`(^|${t})`,c=`(?=$|${t})`}else{const c=e||"!-/:-@[-`{-~¡¿",n=`[^\\s${c}]*`;"complementary"===s?i=n+t+n:"startsWith"===s&&(r=`(^|[\\s${c}])`,i=t.split(/\[\\s\]\+/).join(n+"[\\s]+")+n)}return{lookbehind:r,pattern:i,lookahead:c}}}function e(e){const s=new t(e);this.create=(t,e)=>s.create(t,e),this.createCombinePattern=(t,e)=>s.createCombinePattern(t,e),this.createDiacritics=t=>s.createDiacritics(t)}export{e as default};
