<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0" />
<title>markRegExp() method</title>
<link rel="icon" href="../static/img/favicon.ico">
<link href="../static/css/core.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="data/toc.js"></script>
<script src="../static/js/jquery.js"></script>
<script src="../static/js/core.js"></script>
<script src="../static/js/mark.js"></script>
</head>
<body>
<header>
<div id="menu"> </div>
<div class="logo"><a href=""></a></div>
<div class="search-form">
<form class="search" action="$search.html" method="get">
<input id="q" class="field" type="text" name="q" required placeholder="Search ..." />
<input class="submit" type="submit" />
</form>
</div>
<ul class="header-menu">
<li><a href="../index.html" id="home"> </a></li>
<li><a href="../playground/index.html" target="_blank">Playground</a></li>
<li><a class="selected" href="index.html">Doc</a></li>
</ul>
</header>

<div id="wrapper">
<div id="nav-wrap" class="nav-wrap">
<nav class="sidebar">
<div class="toc">
</div>
</nav>
</div>
<div id="content-wrap" class="content-wrap">
<form class="search-bar">
<div class="advanced-search"></div>
<div class="control-block">
<div class="highlight-all" data-label="All"></div>
<div class="whole-word" data-label="Whole"></div>
</div>
</form>
<main>
<article id="article"><h2 id="markregexp-method">markRegExp() method</h2>
<h3 id="syntax">Syntax</h3>
<pre><code class="language-js"><span class="copy-code"></span><span class="com">// javascript</span>
<span class="kwd">const</span> instance = <span class="kwd">new</span> Mark(context);
instance.markRegExp(regex[, options]);
<span class="com">// jQuery</span>
$(context).markRegExp(regex[, options]);</code></pre>
<h4 id="parameters">Parameters:</h4>
<ul>
<li><code>regex</code> <em class="type">RegExp</em> - The regular expression. With <code>acrossElements</code> option it <b>must</b> have <code>g</code> flag - it works with indexes and only two <code>g</code> and <code>y</code> flags allow control RegExp <code>lastIndex</code>.<br />
<b>Note</b> that for backward compatibility, RegExp without <code>g</code> flag is recompile internally with <code>g</code> flag.<br />
Although without <code>acrossElements</code> option it doesn't require <code>g</code> flag, it still recommended having this flag for future changes.</li>
<li><code>options</code> <em class="type">object</em> - Optional options:</li>
</ul>
<table class="options">
<thead>
<tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr id="markRegExp-element"><td><code>element</code></td><td><em class="type">string</em></td><td> <code>mark</code></td><td>A custom mark element e.g. <code>span</code>. </td></tr>
<tr id="markRegExp-className"><td><code>className</code></td><td><em class="type">string</em></td><td> <code>''</code></td><td> A custom class to be added to mark elements. </td></tr>
<tr id="markRegExp-exclude"><td><code>exclude</code></td><td><em class="type">string <span class="or">or</span> string[]</em></td><td> <code>[]</code></td><td>A string or an array of selectors. Specifies DOM elements that should be excluded from searching. 
<p>See <a href="options.html#exclude-option">exclude</a> option for more details.</td></tr></p>
<tr id="markRegExp-ignoreGroups"><td><code>ignoreGroups</code></td><td><em class="type">number</em></td><td> <code>0</code></td><td>The number of adjacent capturing groups that should be ignored from the start of RegExp 
<p>e.g. <code>/(\w+)(.)(\w+)(?!\2)/g</code>, <code>ignoreGroups : 2</code> - mark the group 3</td></tr></p>
<tr id="markRegExp-separateGroups"><td><code>separateGroups</code></td><td><em class="type">boolean</em></td><td> <code>false</code></td><td>Whether to mark RegExp capturing groups instead of whole match 
<p>See <a href="separate-groups.html">Highlighting separate groups</a> for more details.</td></tr></p>
<tr id="markRegExp-acrossElements"><td><code>acrossElements</code></td><td><em class="type">boolean</em></td><td> <code>false</code></td><td>Whether to search for matches across elements 
<p>See <a href="options.html#acrosselements-option">acrossElements</a> option for more details.</td></tr></p>
<tr id="markRegExp-wrapAllRanges"><td><code>wrapAllRanges</code></td><td><em class="type">boolean</em></td><td> <code>undefined</code></td><td>Mark nesting/overlapping capturing groups  
<p>See <a href="nesting-overlapping.html">Marking nesting and overlapping ranges and match groups</a> for more details.</td></tr></p>
<tr id="markRegExp-blockElementsBoundary"><td><code>blockElementsBoundary</code></td><td><em class="type">boolean <span class="or">or</span> object</em></td><td> <code>undefined</code></td><td>Whether to limit matches within default HTML block elements and/or custom elements 
<p>See <a href="elements-boundaries.html">Elements boundaries</a> for more details.</p>
<ul>
<li><code>tagNames</code> <em class="type">string[]</em> - An array of custom HTML tag names</li>
<li><code>extend</code> <em class="type">boolean</em> - <code>true</code> extends default boundary elements by the custom elements
otherwise only the custom elements do have boundaries</li>
<li><code>char</code> <em class="type">string</em> - A custom boundary character. The default is <code>\x01</code>.</li>
</ul>
</td></tr>
<tr id="markRegExp-shadowDOM"><td><code>shadowDOM</code></td><td><em class="type">boolean</em></td><td> <code>undefined</code></td><td>Whether to mark inside shadow DOMs 
<p>See <a href="shadow-dom.html">Highlighting in shadow DOM</a> for more details.</td></tr></p>
<tr id="markRegExp-iframes"><td><code>iframes</code></td><td><em class="type">boolean</em></td><td> <code>false</code></td><td>Whether to mark inside iframes </td></tr>
<tr id="markRegExp-iframesTimeout"><td><code>iframesTimeout</code></td><td><em class="type">number</em></td><td> <code>5000</code> ms</td><td>The max time to wait for iframe(s) to load before skipping </td></tr>
<tr id="markRegExp-debug"><td><code>debug</code></td><td><em class="type">boolean</em></td><td> <code>false</code></td><td>Whether to log messages </td></tr>
<tr id="markRegExp-log"><td><code>log</code></td><td><em class="type">object</em></td><td> <code>console</code></td><td>Log messages to a specific object 
</td></tr>
<tr id="markRegExp-filter"><td><code>filter</code></td><td><em class="type">function</em></td><td> </td><td>A callback to filter matches. It calls for each match (with <code>acrossElements</code> option, if the match is located across several elements, it calls for each text node which is part of the match) 
<br><b>filter : (textNode, matchString, matchesSoFar, filterInfo) => {}</b>
<ul>
<li><code>textNode</code> <em class="type">Text</em> - The text node which includes the match or with <code>acrossElements</code> option can be part of the match</li>
<li><code>matchString</code> <em class="type">string</em> - The matching string:
<ol>
<li>without <code>ignoreGroups</code> and <code>separateGroups</code> options - the whole match</li>
<li>with <code>ignoreGroups</code> option - the match[ignoreGroups+1] group matching string,<br />
e.g. <code>/(-)(\w+)\s+/g</code>, <code>ignoreGroups : 1</code>, the matching string is content of the group 2</li>
<li>with <code>separateGroups</code> option - the current group matching string</li>
</ol>
</li>
<li><code>matchesSoFar</code> <em class="type">number</em> - The number of all wrapped matches so far</li>
<li><code>filterInfo</code> <em class="type">object</em>:
<ul>
<li><code>match</code> <em class="type">array</em> - The result of RegExp exec() method</li>
<li><code>matchStart</code> <em class="type">boolean</em> - indicate the start of a match  <em>AE</em></li>
<li><code>groupIndex</code> <em class="type">number</em> - The current group index  <em>SG</em></li>
<li><code>execution</code> <em class="type">object</em> - The helper object for early abort:
<ul>
<li><code>abort</code> <em class="type">boolean</em> - Setting it to <code>true</code> breaks method execution</li>
</ul>
</li>
<li><code>offset</code> <em class="type">number</em> - When 'acrossElements: false': the absolute start index of a text node in joined context.
When 'acrossElements: true': the sum of the lengths of separated spaces or boundary strings that were added to the composite string so far.</li>
</ul>
</li>
</ul>
<p>The function <b>must</b> return either <code>true</code> (to wrap) or <code>false</code> (to skip wrapping mark element).</p>
</td></tr>
<tr id="markRegExp-each"><td><code>each</code></td><td><em class="type">function</em></td><td> </td><td>A callback for each marked element 
<br><b>each : (markElement, eachInfo) => {}</b>
<ul>
<li><code>markElement</code> <em class="type">HTMLElement</em> - The marked DOM element</li>
<li><code>eachInfo</code> <em class="type">object</em>:
<ul>
<li><code>match</code> <em class="type">array</em> - The result of RegExp exec() method</li>
<li><code>matchStart</code> <em class="type">boolean</em> - Indicate the start of a match  <em>AE</em></li>
<li><code>count</code> <em class="type">number</em> - The number of wrapped matches so far</li>
<li><code>groupIndex</code> <em class="type">number</em> - The current index of match group  <em>SG</em></li>
<li><code>groupStart</code> <em class="type">boolean</em> - Indicate the start of group  <em>AE</em> <em>SG</em></li>
</ul>
</li>
</ul>
</td></tr>
<tr id="markRegExp-done"><td><code>done</code></td><td><em class="type">function</em></td><td> </td><td>A callback on finish. 
<br><b>done : (totalMarks, totalMatches) => {}</b>
<ul>
<li><code>totalMarks</code> <em class="type">number</em> - The total number of marked elements</li>
<li><code>totalMatches</code> <em class="type">number</em> - The total number of matches</li>
</ul>
</td></tr>
<tr id="markRegExp-noMatch"><td><code>noMatch</code></td><td><em class="type">function</em></td><td> </td><td>A callback that is called when regex failed to match 
<br><b>noMatch : (regex) => {}</b>
<ul>
<li><code>regex</code> <em class="type">string</em> - The stringify RegExp</td></tr></li>
</ul>
</tbody></table>
<h3 id="available-properties-of-the-filterinfo-object-depending-on-options">Available properties of the <code>filterInfo</code> object depending on options</h3>
<table>
<thead>
<tr>
<th>options</th>
<th>match</th>
<th>matchStart</th>
<th>groupIndex</th>
<th>execution</th>
<th>offset</th>
</tr>
</thead>
<tbody>
<tr>
<td>acrossElements</td>
<td>+</td>
<td>+</td>
<td>-</td>
<td>+</td>
<td>+</td>
</tr>
<tr>
<td>acrossElements, separateGroups</td>
<td>+</td>
<td>+</td>
<td>+</td>
<td>+</td>
<td>+</td>
</tr>
<tr>
<td>separateGroups</td>
<td>+</td>
<td>+</td>
<td>+</td>
<td>+</td>
<td>+</td>
</tr>
<tr>
<td>above options are false</td>
<td>+</td>
<td>-</td>
<td>-</td>
<td>+</td>
<td>+</td>
</tr>
</tbody>
</table>
<h3 id="available-properties-of-the-eachinfo-object-depending-on-options">Available properties of the <code>eachInfo</code> object depending on options</h3>
<table>
<thead>
<tr>
<th>options</th>
<th>match</th>
<th>matchStart</th>
<th>groupIndex</th>
<th>groupStart</th>
<th>count</th>
</tr>
</thead>
<tbody>
<tr>
<td>acrossElements</td>
<td>+</td>
<td>+</td>
<td>-</td>
<td>-</td>
<td>+</td>
</tr>
<tr>
<td>acrossElements, separateGroups</td>
<td>+</td>
<td>+</td>
<td>+</td>
<td>+</td>
<td>+</td>
</tr>
<tr>
<td>separateGroups</td>
<td>+</td>
<td>+</td>
<td>+</td>
<td>-</td>
<td>+</td>
</tr>
<tr>
<td>above options are false</td>
<td>+</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>+</td>
</tr>
</tbody>
</table>
<details class="internal-code">
<summary><b>Example with default options values</b></summary>
<pre><code class="language-js"><span class="copy-code"></span><span class="kwd">const</span> options = {
    element : <span class="str">'mark'</span>,
    className : <span class="str">''</span>,
    exclude : [],
    ignoreGroups : 0,
    acrossElements : <span class="kwd">false</span>,
    wrapAllRanges : <span class="kwd">false</span>,
    blockElementsBoundary : <span class="kwd">false</span>,
    shadowDOM : <span class="kwd">false</span>,
    iframes : <span class="kwd">false</span>,
    iframesTimeout : 5000,
    filter : (textNode, matchString, matchesSoFar, filterInfo) => {
        <span class="kwd">return</span> <span class="kwd">true</span>; <span class="com">// must return either true or false</span>
    },
    each : (markElement, eachInfo) => {},
    done : (totalMarks, totalMatches) => {},
    noMatch : (regex) => {},
    debug : <span class="kwd">false</span>,
    log : window.console
};</code></pre>
<p>JavaScript:</p>
<pre><code class='lang-javascript'><span class="kwd">const</span> instance = <span class="kwd">new</span> Mark(document.querySelector(<span class="str">'selector'</span>)),
  regex = <span class="jreg">/../gi</span>;
instance.markRegExp(regex, options);</code></pre>
<p>jQuery:</p>
<pre><code class='lang-javascript'>$(<span class="str">'selector'</span>).markRegExp(regex, options);</code></pre>
</details>
<ul>
<li><em>AE</em> - only available when <code>acrossElements</code> option is set to <code>true</code></li>
<li><em>SG</em> - only available when <code>separateGroups</code> option is set to <code>true</code></li>
<li><em>AE</em> <em>SG</em> - only available when both <code>acrossElements</code> and <code>separateGroups</code> options are set to <code>true</code></li>
</ul>

</article>
<footer><div class="info">
<p><a href="https://github.com/angezid/advanced-mark.js">advanced-mark.js</a> version 2</p>
</div></footer>
</main>
</div>
</div>
</body>
</html>
